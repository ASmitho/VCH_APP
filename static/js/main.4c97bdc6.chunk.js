(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,n){},198:function(e,t,n){e.exports=n.p+"static/media/psych_logo.6956dbda.jpg"},203:function(e,t,n){e.exports=n(661)},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},656:function(e,t,n){},659:function(e,t,n){},660:function(e,t,n){},661:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(106),i=n.n(s),o=(n(210),n(35)),c=n(36),l=n(39),u=n(37),h=n(38),m=(n(211),n(43)),d=n(13),p=n(198),_=n.n(p);n(212),n(109);function f(e){return void 0===e||0==e.length}function g(e,t,a,r,s,i,o,c,l){var u=arguments.length,h=0;if(u>9||u<6)throw new Error("Incorrect number of arguments");if((u<7||f(o))&&(o=.01),u<8||f(c))h=500;else{if(c<=0)throw new Error("Range must be greater than 0");h=c/o,h=2*Math.ceil(h/2)}if((u<9||f(l))&&(l=0),!isFinite(e)||isNaN(e))throw new Error("tGuess must be real and finite");var m=function(e,t,n,a,r,s,i,o){return{updatePdf:1,warnPdf:1,normalizePdf:1,tGuess:e,tGuessSd:t,pThreshold:n,xThreshold:0,beta:a,delta:r,gamma:s,grain:i,dim:o,i:[],x:[],x2:[],p2:[],s2:[],intensity:[],response:[],trialCount:0,quantileOrder:0}}(e,t,a,r,s,i,o,h);return m=function(e,t){var a=n(85);if(arguments.length<1)throw new Error("Usage: QuestRecompute( q, plotIt = 0 )");if(!e.updatePdf)return;e.gamma>e.pThreshold&&(console.log("Reducing gamma from %.2f to 0.5"),e.gamma=.5);(arguments.length<2||f(t))&&(t=0);e.i=[],e.x=[],e.x2=[],e.p2=[],e.s2=[];for(var r=-e.dim/2;r<=e.dim/2;r++)e.i.push(r);e.x=e.i.map(function(t){return t*e.grain});var s=e.x.map(function(t){return t/e.tGuessSd}),i=s.map(function(e){return Math.pow(e,2)});e.pdf=i.map(function(e){return-.5*e}).map(function(e){return Math.exp(e)});var o=b(e.pdf);e.pdf=e.pdf.map(function(e){return e/o});var c=[];for(r=-e.dim;r<=e.dim;r++)c.push(r);e.x2=c.map(function(t){return a.eval(t+"*"+e.grain)}),s=e.x2.map(function(t){return a.eval(t+"*"+e.beta)}),e.p2=s.map(function(t){return a.eval(e.delta+"*"+e.gamma+"+(1-"+e.delta+")*(1-(1-"+e.gamma+")*e^(-10 ^ "+t+"))")});if(Math.min(e.p2[0],e.p2[e.p2.length-1])>e.pThreshold||Math.max(e.p2[0],e.p2[e.p2.length-1])<e.pThreshold)throw new Error("psychometric function range ["+Math.min.apply(null,e.p2)+" "+Math.max.apply(null,e.p2)+" ] omits "+e.pThreshold+" threshold");var l=n(104).linear;e.xThreshold=l(e.pThreshold,e.x2,e.p2);for(var r=0;r<e.p2.length;r++)if(!isFinite(e.p2[r]))throw new Error("psychometric function p2 is not finite"+r);var u=e.p2.slice(),h=(u=u.reverse()).map(function(e){return 1-e}),m=u;if(e.s2[0]=h,e.s2[1]=m,void 0==e.intensity||void 0==e.response){var d=new Array(1e4).fill(0);e.trialCount=0,e.intensity=d,e.response=d}for(var p=0;p<e.s2.length;p++)for(r=0;r<e.s2[p].length;r++)if(!isFinite(e.s2[p][r]))throw new Error("psychometric function s2 is not finite"+r);var _=e.p2[0],g=e.p2[e.p2.length-1],y=g*Math.log(g+Number.EPSILON)-_*Math.log(_+Number.EPSILON)+(1-g+Number.EPSILON)*Math.log(1-g+Number.EPSILON)-(1-_+Number.EPSILON)*Math.log(1-_+Number.EPSILON);y=1/(1+Math.exp(y/(_-g))),e.quantileOrder=(y-_)/(g-_);for(var w=0;w<e.pdf.length;w++)if(!isFinite(e.pdf[w]))throw new Error("prior pdf is not finite");for(p=0;p<e.trialCount;p++){var E=Math.max(-1e10,Math.min(1e10,e.intensity[p])),v=e.i.map(function(t){return e.pdf.length+t-Math.round((E-e.tGuess)/e.grain)});v[0]<1&&(v=v.map(function(e){return e+1-v[0]})),v[v.length-1]>e.s2[0].length&&(v=v.map(function(t){return t+e.s2.length-v[v.length-1]}));var k=v.map(function(t){return e.s2[e.response[p]][t]});for(r=0;r<k.length;r++)e.pdf[r]=e.pdf[r]*k[r];0==e.normalizePdf&&p%100==0&&function(){var t=b(e.pdf);e.pdf=e.pdf.map(function(e){return e/t})}()}if(e.normalizePdf){var O=b(e.pdf);e.pdf=e.pdf.map(function(e){return e/O})}for(r=0;r<e.pdf.length;r++)if(!isFinite(e.pdf[r]))throw new Error("pdf is not finite");return e}(m,l)}function y(e,t,n){if(3!=arguments.length)throw new Error("Incorrect number of parameters (3) ");if(void 0===e)throw new Error("q is undefined ");if(!isFinite(t)||isNaN(t))throw new Error("Intensity must be real, not complex");if(n<0||n>=e.s2.length)throw new Error("response "+n+" is out of range 0 to "+e.s2.length);if(1==e.updatePdf){var a=Math.max(-1e10,Math.min(1e10,t)),r=e.i.map(function(t){return e.pdf.length+t-Math.round((a-e.tGuess)/e.grain)});if(r[0]<1||r[r.length-1]>e.s2[0].length){if(1==e.warnPdf){var s=(1-e.pdf.length-e.i[0])*e.grain+e.tGuess,i=(e.s2[0].length-e.pdf.length-e.i[e.i.length-1])*e.grain+e.tGuess;alert("QuestUpdate: intensity "+a+" out of range "+s+" to "+i+'. Pdf will be inexact. Suggest that you increase "range" in call to QuestCreate.')}r=r[0]<1?r.map(function(e){return e+1-r[0]}):r.map(function(t){return t+e.s2[0].length-r[r.length-1]})}for(var o=0;o<r.length;o++)e.pdf[o]=e.pdf[o]*e.s2[n][r[o]];if(e.normalizePdf){var c=b(e.pdf);e.pdf=e.pdf.map(function(e){return e/c})}}if(e.trialCount+=1,e.trialCount>e.intensity.length)for(var l=0;l<1e4;l++)e.intensity.push(0),e.response.push(0);for(var u=0;u<e.trialCount;u++)e.intensity[u]=.5,e.response[u]=n;return e}function w(e,t){if(arguments.length>2)throw new Error("Usage: intensity=QuestQuantile(q,[quantileOrder])");if(arguments.length<2&&(t=e.quantileOrder),t>1||t<0)throw new Error("quantileOrder"+t+" is outside range 0 to 1.");var a=function(e){var t=[];return e.reduce(function(e,n,a){return t[a]=e+n},0),t}(e.pdf);if(!isFinite(a[a.length-1]))throw new Error("pdf is not finite");if(0==a[a.length-1])throw new Error("pdf is all zero");if(t<a[0])return e.tGuess+e.x[0];if(t>a[a.length-1])return e.tGuess+e.x[e.x.length-1];var r=a.slice();r.unshift(-1);var s=function(e){for(var t=[],n=0;n<e.length;n++)e[n]>0&&t.push(n);return t}(function(e){for(var t=[],n=0;n<e.length-1;n++)t.push(e[n+1]-e[n]);return t}(r));if(s.length<2)throw new Error("pdf has only "+s.length+" nonzero point(s)");var i=n(104).linear,o=E(a,s),c=E(e.x,s);return e.tGuess+i(t*a[a.length-1],o,c)[0]}function E(e,t){for(var n=[],a=0;a<t.length;a++)n.push(e[t[a]]);return n}function b(e){return e.reduce(function(e,t){return e+t},0)}var v=n(29),k=function(e){return{type:"ADD_RESPONSE_1",payload:e}},O=function(e){return{type:"ADD_RESPONSE_TIME_1",payload:e}},S=function(e){return{type:"ADD_CONTRAST_1",payload:e}},C=function(e){return{type:"ADD_ARRAY",payload:e}},x=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(d.a)(Object(d.a)(n))),n.state={continue:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"keyFunction",value:function(e){81===e.keyCode&&(alert("User has Requested to Continue"),this.setState(function(e,t){return{continue:!0}}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Instructions"}):r.a.createElement("div",{className:"Welcome"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Welcome-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Welcome-text"},r.a.createElement("span",{className:"bigger"},"Welcome to the study! "),r.a.createElement("br",null),r.a.createElement("br",null),"Please enter responses to the questions asked by pressing the:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null," 'Q' key for 'YES I SEE IT'")," or ",r.a.createElement("b",null," 'E' key for \"NO I DO NOT'"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)," Sometimes it may be difficult to answer, but if you do not know, please make your best guess.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)," PRESS the ",r.a.createElement("b",null," YES I SEE IT / 'Q' key")," to CONTINUE")),r.a.createElement("a",{href:"https://medicine.yale.edu/psychiatry/care/cmhc/",title:"Learn more about the Connecticut Mental Health Center",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:_.a,className:"Site-link",alt:"logo"}))))}}]),t}(a.Component),j=Object(v.c)(function(e){return{data:e.data}},function(e){return{add_response_1:function(t){return e(k(t))},add_array:function(t){return e(C(t))}}})(x),N=(n(656),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(d.a)(Object(d.a)(n))),n.state={continue:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"keyFunction",value:function(e){81===e.keyCode&&(alert("User has Requested to Continue"),this.setState(function(e,t){return{continue:!0}}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial"}):r.a.createElement("div",{className:"Instructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Instructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Instructions-text"},"This is a vision test.",r.a.createElement("br",null),r.a.createElement("br",null)," A visual white noise will be shown throughout the experiment.",r.a.createElement("br",null),r.a.createElement("br",null)," A striped-texture will appear inside the white noise when a tone is played.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "Q"/YES ')," if you ",r.a.createElement("b",null," DO "),"see the stripes.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "E"/NO ')," if you ",r.a.createElement("b",null," DO NOT ")," see the stripes.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES TO BEGIN A SHORT PRACTICE SESSION'))))}}]),t}(a.Component)),T=n(74),I=n.n(T),M=n(108);n(195);function D(){var e={background:127.5,angle:Math.floor(135*Math.random())+45,imsize:256,initcontrast:.5,threshold:.2,phases:[0,.25],phase:0,alpha:.5,ppd:160,frequency:0};return e.phase=e.phases[Math.round(Math.random())],e.frequency=2/e.ppd,e}function F(e,t){for(var n=[],a=[],r=1;r<e.imsize+1;r++)for(var s=1;s<e.imsize+1;s++)n[4*(r-1+(s-1)*e.imsize)+0]=r-(e.imsize+1)/2,n[4*(r-1+(s-1)*e.imsize)+1]=r-(e.imsize+1)/2,n[4*(r-1+(s-1)*e.imsize)+2]=r-(e.imsize+1)/2,n[4*(r-1+(s-1)*e.imsize)+3]=r-(e.imsize+1)/2,a[4*(r-1+(s-1)*e.imsize)+0]=s-(e.imsize+1)/2,a[4*(r-1+(s-1)*e.imsize)+1]=s-(e.imsize+1)/2,a[4*(r-1+(s-1)*e.imsize)+2]=s-(e.imsize+1)/2,a[4*(r-1+(s-1)*e.imsize)+3]=s-(e.imsize+1)/2;for(var i=[],o=0;o<n.length&&o<a.length;o++)i[o]=.5*Math.cos(2*Math.PI*(e.frequency*(Math.sin(Math.PI/180*e.angle)*n[o]+Math.cos(Math.PI/180*e.angle)*a[o])+e.phase))*t;return i.map(function(t){return e.background+t*e.background})}var P=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(d.a)(Object(d.a)(n))),n.create_noise=n.create_noise.bind(Object(d.a)(Object(d.a)(n))),n.state={continue:!1,counter:0,responses_1:[],contrast_array_1:[],response_time_1:[],ratings_1:[],responses_2:[],contrast_array_2:[],response_time_2:[],ratings_2:[],time_window:!1,time_window_start:0,time_window_rating:!1,limit:100,contrast_flag:1},n.canvasRef=r.a.createRef(),n.audioContext=new AudioContext,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"create_noise",value:function(e,t){var a,r=[.2,.5,.75],s=r.length,i=r,o=0,c=new(n(196)),l=document.getElementById("c"),u=l.getContext("2d"),h=u.getImageData(0,0,l.width,l.height),m=h.data,d=0,p=D(),_=F(p,0),f=Math.floor(20*Math.random()),g=100,y=0,w=void 0,E=this;function b(){return v.apply(this,arguments)}function v(){return(v=Object(M.a)(I.a.mark(function t(){var n,r,v,k,O,S,C,x,j,N;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(d==g+f&&(o=E.state.counter,y=i[o++],console.log(y),n=(new Date).getTime()/1e3,console.log("time on ",n),E.setState({time_window:!0,time_window_rating:!0,time_window_start:n}),console.log(E.state.responses_1,E.state.ratings_1,E.state.response_time_1,E.state.contrast_array_1),a=F(p,y),z(50,830,300,e)),r=0;r<256;r++)for(v=0;v<256;v++)d==g+f||d==g+f+1||d==g+f+2||d==g+f+3||d==g+f+4||d==g+f+5||d==g+f+6||d==g+f+7||d==g+f+8||d==g+f+9||d==g+f+10||d==g+f+11||d==g+f+12||d==g+f+13||d==g+f+14||d==g+f+15||d==g+f+16||d==g+f+17||d==g+f+18||d==g+f+19||d==g+f+20||d==g+f+21||d==g+f+22||d==g+f+23||d==g+f+24||d==g+f+25||d==g+f+26||d==g+f+27||d==g+f+28||d==g+f+29||d==g+f+30?(d==g+f+30&&(d=0),k=.4*c.noise3D(r/8,v/8,d/8)+.35,m[4*(r+256*v)+0]=p.alpha*a[4*(r+256*v)+0]+(1-p.alpha)*k*250,m[4*(r+256*v)+1]=p.alpha*a[4*(r+256*v)+1]+(1-p.alpha)*k*250,m[4*(r+256*v)+2]=p.alpha*a[4*(r+256*v)+2]+(1-p.alpha)*k*250,m[4*(r+256*v)+3]=255):(n=(new Date).getTime()/1e3,E.state.time_window_start+2==n&&(E.setState({time_window:!1,time_window_rating:!1}),E.state.contrast_array_1.length<E.state.responses_1.length&&E.setState({contrast_array_1:E.state.contrast_array_1.concat([y])}),E.state.responses_1.length!=E.state.ratings_1.length&&(E.state.responses_1.length>E.state.ratings_1.length?(console.log("response and response time discarded",E.state.responses_1,E.state.response_time_1,E.state.ratings_1,E.state.contrast_array_1),E.setState({responses_1:E.state.responses_1.slice(0,E.state.ratings_1.length),response_time_1:E.state.response_time_1.slice(0,E.state.ratings_1.length),counter:E.state.counter-1,contrast_array_1:E.state.contrast_array_1.slice(0,E.state.ratings_1.length)})):(console.log("rating discarded",E.state.responses_1,E.state.ratings_1,E.state.contrast_array_1),E.setState({ratings_1:E.state.ratings_1.slice(0,E.state.responses_1.length)}))),console.log("time off ",n)),k=.4*c.noise3D(r/8,v/8,d/8)+.35,m[4*(r+256*v)+0]=p.alpha*_[4*(r+256*v)+0]+(1-p.alpha)*k*250,m[4*(r+256*v)+1]=p.alpha*_[4*(r+256*v)+1]+(1-p.alpha)*k*250,m[4*(r+256*v)+2]=p.alpha*_[4*(r+256*v)+2]+(1-p.alpha)*k*250,m[4*(r+256*v)+3]=255);if(d++,u.putImageData(h,0,0),O=l.width/8,S=l.height/8,C=l.width/2-O/2,x=l.height/2-S/2,(j=new Image).src="https://www.shareicon.net/data/256x256/2015/12/04/682310_cross_512x512.png",u.fillStyle="gray",u.fillRect(C,x,O,S),u.drawImage(j,C,x,O,S),o!=s){t.next=19;break}for(window.cancelAnimationFrame(w),N=0;N<s;N++)E.props.add_response_1(E.state.responses_1[N]),E.props.add_response_time_1(E.state.response_time_1[N]),E.props.add_contrast_1(E.state.contrast_array_1[N]);return E.audioContext.close(),E.setState({continue:!0}),t.abrupt("return");case 19:o<s&&(w=window.requestAnimationFrame(b));case 20:case"end":return t.stop()}},t)}))).apply(this,arguments)}b.call(E)}},{key:"keyFunction",value:function(e){var t=(new Date).getTime()/1e3;81===e.keyCode&&1==this.state.time_window&&(this.setState({counter:this.state.counter+1,responses_1:this.state.responses_1.concat([1]),response_time_1:this.state.response_time_1.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),69===e.keyCode&&1==this.state.time_window&&(this.setState({counter:this.state.counter+1,responses_1:this.state.responses_1.concat([0]),response_time_1:this.state.response_time_1.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),49!==e.keyCode&&50!==e.keyCode&&51!==e.keyCode&&52!==e.keyCode&&53!==e.keyCode||1!=this.state.time_window_rating||this.setState({ratings_1:this.state.ratings_1.concat([e.keyCode-48]),time_window_rating:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),0==this.state.continue&&this.create_noise(this.audioContext)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return 1==this.state.continue?(alert("Trial completed"),r.a.createElement(m.a,{to:"/Complete"})):r.a.createElement("div",{className:"Trial"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Trial-header"},r.a.createElement("canvas",{id:"c",width:"256",height:"256",style:{zIndex:"0",position:"fixed",left:"25%",width:"50%",height:"auto"}}),r.a.createElement("canvas",{id:"c2",width:"256",height:"256",style:{zIndex:"1",position:"fixed",left:"25%",width:"50%",height:"auto"}})))}}]),t}(a.Component),R=Object(v.c)(function(e){return{data:e.data}},function(e){return{add_response_1:function(t){return e(k(t))},add_response_time_1:function(t){return e(O(t))},add_contrast_1:function(t){return e(S(t))},add_array:function(t){return e(C(t))}}})(P);function z(e,t,n,a){if(a){var r=a.createOscillator(),s=a.createGain();r.connect(s),r.value=t,s.connect(a.destination),s.gain.value=e/100,r.start(a.currentTime),r.stop(a.currentTime+n/1e3)}}n(659);var A=function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))},Q=(n(660),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(d.a)(Object(d.a)(n))),n.state={continue:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"keyFunction",value:function(e){81===e.keyCode&&(alert("User has Requested to Continue"),this.setState(function(e,t){return{continue:!0}}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return console.log(this.props.data),!0===this.state.continue?r.a.createElement(m.a,{to:"/TrialQ"}):r.a.createElement("div",{className:"Complete"},r.a.createElement("header",{className:"Complete-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Complete-text"},"Congratulations",r.a.createElement("br",null),r.a.createElement("br",null)," You have completed the first trial",r.a.createElement("br",null),r.a.createElement("br",null)," You responses have been recorded:",r.a.createElement("br",null),r.a.createElement("br",null),"Responses:",this.props.data.responses_1.map(function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none"}},e)}),"Response Times:",this.props.data.response_time_1.map(function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none"}},e)}),"Contrasts:",this.props.data.contrast_1.map(function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none"}},e)}),r.a.createElement("br",null),r.a.createElement("br",null)))))}}]),t}(a.Component)),L=Object(v.c)(function(e){return{data:e.data}})(Q),q=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(d.a)(Object(d.a)(n))),n.create_noise=n.create_noise.bind(Object(d.a)(Object(d.a)(n))),n.state={continue:!1,counter:0,counter2:0,change:!1,responses_1:[],contrast_array_1:[],response_time_1:[],ratings_1:[],responses_2:[],contrast_array_2:[],response_time_2:[],ratings_2:[],time_window:!1,time_window_start:0,time_window_rating:!1,limit:100,rating_window:!0,currentQ:1},n.canvasRef=r.a.createRef(),n.audioContext=new AudioContext,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"create_noise",value:function(e,t){var a,r=80,s=0,i=0,o=0,c=[0,.5,1,0,.5,1,0,.5,1,0,.5,1],l=(r=c.length,new(n(196))),u=document.getElementById("c"),h=u.getContext("2d"),m=h.getImageData(0,0,u.width,u.height),d=m.data,p=0,_=.5,f=g(_,.1,.75,3.5,.01,.01,.001,20),E=g(_,.1,.75,3.5,.01,.01,.001,20),b=D(),v=F(b,0),k=Math.floor(20*Math.random()),O=100,S=0,C=void 0,x=this;function j(){return N.apply(this,arguments)}function N(){return(N=Object(M.a)(I.a.mark(function t(){var n,c,g,N,T,M,D,P,R;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(p==O+k&&(s=x.state.counter,i=x.state.counter2,o=s+i,console.log(w(f),w(E)),s==i&&x.setState({currentQ:1}),s!=i&&(i++,x.setState({currentQ:2})),1==x.state.currentQ&&(S=(s=0)?_+.3:w(f)),2==x.state.currentQ&&(S=(i=0)?_-.3:w(E)),console.log(S),n=(new Date).getTime()/1e3,console.log("time on ",n),x.setState({time_window:!0,time_window_rating:!0,time_window_start:n}),console.log("for 1",x.state.responses_1,x.state.ratings_1,x.state.response_time_1,x.state.contrast_array_1),console.log("for 2",x.state.responses_2,x.state.ratings_2,x.state.response_time_2,x.state.contrast_array_2),a=F(b,S),G(50,830,300,e)),c=0;c<256;c++)for(g=0;g<256;g++)p==O+k||p==O+k+1||p==O+k+2||p==O+k+3||p==O+k+4||p==O+k+5||p==O+k+6||p==O+k+7||p==O+k+8||p==O+k+9||p==O+k+10||p==O+k+11||p==O+k+12||p==O+k+13||p==O+k+14||p==O+k+15||p==O+k+16||p==O+k+17||p==O+k+18||p==O+k+19||p==O+k+20||p==O+k+21||p==O+k+22||p==O+k+23||p==O+k+24||p==O+k+25||p==O+k+26||p==O+k+27||p==O+k+28||p==O+k+29||p==O+k+30?(p==O+k+30&&(p=0),N=.4*l.noise3D(c/8,g/8,p/8)+.35,d[4*(c+256*g)+0]=b.alpha*a[4*(c+256*g)+0]+(1-b.alpha)*N*250,d[4*(c+256*g)+1]=b.alpha*a[4*(c+256*g)+1]+(1-b.alpha)*N*250,d[4*(c+256*g)+2]=b.alpha*a[4*(c+256*g)+2]+(1-b.alpha)*N*250,d[4*(c+256*g)+3]=255):(n=(new Date).getTime()/1e3,x.state.time_window_start+2==n&&(x.setState({time_window:!1,time_window_rating:!1}),1==x.state.currentQ&&(x.state.contrast_array_1.length<x.state.responses_1.length&&(x.setState({contrast_array_1:x.state.contrast_array_1.concat([S])}),x.setState({change:!0})),x.state.responses_1.length!=x.state.ratings_1.length&&(x.state.responses_1.length>x.state.ratings_1.length?(console.log("response and response time discarded",x.state.responses_1,x.state.response_time_1,x.state.ratings_1,x.state.contrast_array_1),x.setState({responses_1:x.state.responses_1.slice(0,x.state.ratings_1.length),response_time_1:x.state.response_time_1.slice(0,x.state.ratings_1.length),counter:x.state.counter-1,contrast_array_1:x.state.contrast_array_1.slice(0,x.state.ratings_1.length)})):(console.log("rating discarded",x.state.responses_1,x.state.ratings_1,x.state.contrast_array_1),x.setState({ratings_1:x.state.ratings_1.slice(0,x.state.responses_1.length)})))),2==x.state.currentQ&&(x.state.contrast_array_2.length<x.state.responses_2.length&&(x.setState({contrast_array_2:x.state.contrast_array_2.concat([S])}),x.setState({change:!0})),x.state.responses_2.length!=x.state.ratings_2.length&&(x.state.responses_2.length>x.state.ratings_2.length?(console.log("response and response time discarded",x.state.responses_2,x.state.response_time_2,x.state.ratings_2,x.state.contrast_array_2),x.setState({responses_2:x.state.responses_2.slice(0,x.state.ratings_2.length),response_time_2:x.state.response_time_2.slice(0,x.state.ratings_2.length),counter:x.state.counter-1,contrast_array_2:x.state.contrast_array_2.slice(0,x.state.ratings_2.length)})):(console.log("rating discarded",x.state.responses_2,x.state.ratings_2,x.state.contrast_array_2),x.setState({ratings_2:x.state.ratings_2.slice(0,x.state.responses_2.length)})))),console.log("time off ",n)),N=.4*l.noise3D(c/8,g/8,p/8)+.35,d[4*(c+256*g)+0]=b.alpha*v[4*(c+256*g)+0]+(1-b.alpha)*N*250,d[4*(c+256*g)+1]=b.alpha*v[4*(c+256*g)+1]+(1-b.alpha)*N*250,d[4*(c+256*g)+2]=b.alpha*v[4*(c+256*g)+2]+(1-b.alpha)*N*250,d[4*(c+256*g)+3]=255);if(p++,h.putImageData(m,0,0),T=u.width/8,M=u.height/8,D=u.width/2-T/2,P=u.height/2-M/2,(R=new Image).src="https://www.shareicon.net/data/256x256/2015/12/04/682310_cross_512x512.png",h.fillStyle="gray",h.fillRect(D,P,T,M),h.drawImage(R,D,P,T,M),o!=r){t.next=18;break}return window.cancelAnimationFrame(C),x.audioContext.close(),x.setState({continue:!0}),t.abrupt("return");case 18:o<r&&(C=window.requestAnimationFrame(j),1==x.state.currentQ&&1==x.state.change&&(console.log("changing the q"),f=y(f,[x.state.contrast_array_1[x.state.contrast_array_1.length-1]],[x.state.responses_1[x.state.responses_1.length-1]]),console.log(w(f)),x.setState({change:!1})),2==x.state.currentQ&&1==x.state.change&&(E=y(E,x.state.contrast_array_1[x.state.contrast_array_1.length-1],x.state.responses_1[x.state.responses_1.length-1]),x.setState({change:!1})));case 19:case"end":return t.stop()}},t)}))).apply(this,arguments)}j.call(x)}},{key:"keyFunction",value:function(e){var t=(new Date).getTime()/1e3;81===e.keyCode&&1==this.state.time_window&&1==this.state.currentQ&&(this.setState({counter:this.state.counter+1,responses_1:this.state.responses_1.concat([1]),response_time_1:this.state.response_time_1.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),81===e.keyCode&&1==this.state.time_window&&2==this.state.currentQ&&(this.setState({counter2:this.state.counter2+1,responses_2:this.state.responses_2.concat([1]),response_time_2:this.state.response_time_2.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),69===e.keyCode&&1==this.state.time_window&&1==this.state.currentQ&&(this.setState({counter:this.state.counter+1,responses_1:this.state.responses_1.concat([0]),response_time_1:this.state.response_time_1.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),69===e.keyCode&&1==this.state.time_window&&2==this.state.currentQ&&(this.setState({counter:this.state.counter2+1,responses_2:this.state.responses_2.concat([0]),response_time_2:this.state.response_time_2.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),49!==e.keyCode&&50!==e.keyCode&&51!==e.keyCode&&52!==e.keyCode&&53!==e.keyCode||1!=this.state.time_window_rating||(1==this.state.currentQ?this.setState({ratings_1:this.state.ratings_1.concat([e.keyCode-48]),time_window_rating:!1}):this.setState({ratings_2:this.state.ratings_2.concat([e.keyCode-48]),time_window_rating:!1}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),0==this.state.continue&&this.create_noise(this.audioContext)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return 1==this.state.continue?(alert("Trial completed"),r.a.createElement(m.a,{to:"/Complete"})):r.a.createElement("div",{className:"Trial"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Trial-header"},r.a.createElement("canvas",{id:"c",width:"256",height:"256",style:{zIndex:"0",position:"fixed",left:"25%",width:"50%",height:"auto"}}),r.a.createElement("canvas",{id:"c2",width:"256",height:"256",style:{zIndex:"1",position:"fixed",left:"25%",width:"50%",height:"auto"}})))}}]),t}(a.Component),U=Object(v.c)(function(e){return{data:e.data}},function(e){return{add_response_1:function(t){return e(k(t))},add_response_time_1:function(t){return e(O(t))},add_contrast_1:function(t){return e(S(t))},add_array:function(t){return e(C(t))}}})(q);function G(e,t,n,a){if(a){var r=a.createOscillator(),s=a.createGain();r.connect(s),r.value=t,s.connect(a.destination),s.gain.value=e/100,r.start(a.currentTime),r.stop(a.currentTime+n/1e3)}}var Y=function(){return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",exact:!0,component:j}),r.a.createElement(m.b,{path:"/Welcome",exact:!0,component:j}),r.a.createElement(m.b,{path:"/Instructions",exact:!0,component:N}),r.a.createElement(m.b,{path:"/Trial",exact:!0,component:R}),r.a.createElement(m.b,{path:"/Complete",exact:!0,component:L}),r.a.createElement(m.b,{path:"/TrialQ",exact:!0,component:U}),r.a.createElement(m.b,{component:A}))},W=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y,null))}}]),t}(a.Component),B=n(58),H=n(32),J=n(52),V=n(197),X=n(134),K=n(110),Z=n(111),$={responses_1:[],responses_2:[],response_time_1:[],response_time_2:[],contrast_1:[],contrast_2:[],test:1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARRAY":return e+1;case"ADD_RESPONSE_1":return Object(Z.a)({},e,{responses_1:[].concat(Object(K.a)(e.responses_1),[t.payload])});case"ADD_RESPONSE_TIME_1":return Object(Z.a)({},e,{response_time_1:[].concat(Object(K.a)(e.response_time_1),[t.payload])});case"ADD_CONTRAST_1":return Object(Z.a)({},e,{contrast_1:[].concat(Object(K.a)(e.contrast_1),[t.payload])});default:return e}},te=function(e){return Object(J.c)({data:ee,router:Object(X.a)(e)})},ne=Object(H.a)();var ae=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.d;return Object(J.e)(te(ne),e,t(Object(J.a)(Object(V.a)(ne))))}({history:ne});i.a.render(r.a.createElement(v.a,{store:ae},r.a.createElement(B.a,{history:ne,basename:"/VCH_APP"},r.a.createElement(W,null))),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.4c97bdc6.chunk.js.map