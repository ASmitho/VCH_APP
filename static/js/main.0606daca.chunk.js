(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,n){},198:function(e,t,n){e.exports=n.p+"static/media/psych_logo.6956dbda.jpg"},201:function(e,t,n){e.exports=n(661)},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},656:function(e,t,n){},659:function(e,t,n){},660:function(e,t,n){},661:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(106),i=n.n(s),o=(n(208),n(35)),c=n(36),l=n(39),u=n(37),h=n(38),m=(n(209),n(43)),p=n(10),d=n(198),_=n.n(d),f=(n(210),n(109));function g(e){return void 0===e||0==e.length}function w(e,t,n,a,r,s,i,o,c){var l=arguments.length,u=0;if(l>9||l<6)throw new Error("Incorrect number of arguments");if((l<7||g(i))&&(i=.01),l<8||g(o))u=500;else{if(o<=0)throw new Error("Range must be greater than 0");u=o/i,u=2*Math.ceil(u/2)}if((l<9||g(c))&&(c=0),!isFinite(e)||isNaN(e))throw new Error("tGuess must be real and finite");var h=function(e,t,n,a,r,s,i,o){return{updatePdf:1,warnPdf:1,normalizePdf:1,tGuess:e,tGuessSd:t,pThreshold:n,xThreshold:0,beta:a,delta:r,gamma:s,grain:i,dim:o,i:[],x:[],x2:[],p2:[],s2:[],intensity:[],response:[],trialCount:0,quantileOrder:0}}(e,t,n,a,r,s,i,u);return h=y(h,c)}function y(e,t){var a=n(59);if(arguments.length<1)throw new Error("Usage: QuestRecompute( q, plotIt = 0 )");if(e.updatePdf){e.gamma>e.pThreshold&&(console.log("Reducing gamma from %.2f to 0.5"),e.gamma=.5),(arguments.length<2||g(t))&&(t=0),e.i=[],e.x=[],e.x2=[],e.p2=[],e.s2=[];for(var r=-e.dim/2;r<=e.dim/2;r++)e.i.push(r);e.x=e.i.map(function(t){return t*e.grain});var s=e.x.map(function(t){return t/e.tGuessSd}),i=s.map(function(e){return Math.pow(e,2)});e.pdf=i.map(function(e){return-.5*e}).map(function(e){return Math.exp(e)});var o=j(e.pdf);e.pdf=e.pdf.map(function(e){return e/o});var c=[];for(r=-e.dim;r<=e.dim;r++)c.push(r);if(e.x2=c.map(function(t){return a.eval(t+"*"+e.grain)}),s=e.x2.map(function(t){return a.eval(t+"*"+e.beta)}),e.p2=s.map(function(t){return a.eval(e.delta+"*"+e.gamma+"+ ( 1 -"+e.delta+" ) * ( 1 - ( 1-"+e.gamma+") *e^(-10 ^ "+t+"))")}),Math.min(e.p2[0],e.p2[e.p2.length-1])>e.pThreshold||Math.max(e.p2[0],e.p2[e.p2.length-1])<e.pThreshold)throw new Error("psychometric function range ["+Math.min.apply(null,e.p2)+" "+Math.max.apply(null,e.p2)+" ] omits "+e.pThreshold+" threshold");var l=n(104).linear;e.xThreshold=l(e.pThreshold,e.p2,e.x2);for(r=0;r<e.p2.length;r++)if(!isFinite(e.p2[r]))throw new Error("psychometric function p2 is not finite"+r);e.p2=e.x2.map(function(t){return a.eval(e.delta+"*"+e.gamma+"+ ( 1 -"+e.delta+" ) * ( 1 - ( 1-"+e.gamma+") *e^(-10 ^ ("+e.beta+"* ("+t+"+"+e.xThreshold+"))))")});var u=e.p2.slice(),h=(u=u.reverse()).map(function(e){return 1-e}),m=u;if(e.s2[0]=h,e.s2[1]=m,0==e.intensity.length||0==e.response.length){var p=new Array(1e4).fill(0);e.trialCount=0,e.intensity=p,e.response=p}for(var d=0;d<e.s2.length;d++)for(r=0;r<e.s2[d].length;r++)if(!isFinite(e.s2[d][r]))throw new Error("psychometric function s2 is not finite"+r);var _=e.p2[0],f=e.p2[e.p2.length-1],w=f*Math.log(f+Number.EPSILON)-_*Math.log(_+Number.EPSILON)+(1-f+Number.EPSILON)*Math.log(1-f+Number.EPSILON)-(1-_+Number.EPSILON)*Math.log(1-_+Number.EPSILON);w=1/(1+Math.exp(w/(_-f))),e.quantileOrder=(w-_)/(f-_);for(var y=0;y<e.pdf.length;y++)if(!isFinite(e.pdf[y]))throw new Error("prior pdf is not finite");for(d=0;d<e.trialCount;d++){var b=Math.max(-1e10,Math.min(1e10,e.intensity[d])),E=e.i.map(function(t){return e.pdf.length+t-Math.round((b-e.tGuess)/e.grain)});E[0]<1&&(E=E.map(function(e){return e+1-E[0]})),E[E.length-1]>e.s2[0].length&&(E=E.map(function(t){return t+e.s2.length-E[E.length-1]}));var v=E.map(function(t){return e.s2[e.response[d]][t]});for(r=0;r<v.length;r++)e.pdf[r]=e.pdf[r]*v[r];e.normalizePdf&&d%100==0&&function(){var t=j(e.pdf);e.pdf=e.pdf.map(function(e){return e/t})}()}if(e.normalizePdf){var O=j(e.pdf);e.pdf=e.pdf.map(function(e){return e/O})}for(r=0;r<e.pdf.length;r++)if(!isFinite(e.pdf[r]))throw new Error("pdf is not finite");return e}}function b(e,t,n){if(3!=arguments.length)throw new Error("Incorrect number of parameters (3) ");if(void 0===e)throw new Error("q is undefined ");if(!isFinite(t)||isNaN(t))throw new Error("Intensity must be real, not complex");if(n<0||n>=e.s2.length)throw new Error("response "+n+" is out of range 0 to "+e.s2.length);if(1==e.updatePdf){var a=Math.max(-1e10,Math.min(1e10,t)),r=e.i.map(function(t){return e.pdf.length+t-Math.round((a-e.tGuess)/e.grain)});if(r[0]<1||r[r.length-1]>e.s2[0].length){if(1==e.warnPdf){var s=(1-e.pdf.length-e.i[0])*e.grain+e.tGuess,i=(e.s2[0].length-e.pdf.length-e.i[e.i.length-1])*e.grain+e.tGuess;alert("QuestUpdate: intensity "+a+" out of range "+s+" to "+i+'. Pdf will be inexact. Suggest that you increase "range" in call to QuestCreate.')}r=r[0]<1?r.map(function(e){return e+1-r[0]}):r.map(function(t){return t+e.s2[0].length-r[r.length-1]})}for(var o=0;o<r.length;o++)e.pdf[o]=e.pdf[o]*e.s2[n][r[o]-1];if(e.normalizePdf){var c=j(e.pdf);e.pdf=e.pdf.map(function(e){return e/c})}}if(e.trialCount+=1,e.trialCount>e.intensity.length)for(var l=0;l<1e4;l++)e.intensity.push(0),e.response.push(0);for(var u=0;u<e.trialCount;u++)e.intensity[u]=.5,e.response[u]=n;return e}function E(e){if(1!=arguments.length)throw new Error("Usage: t=QuestMean(q)");var t=j(e.pdf),n=j(x(e.pdf,e.x));return e.tGuess+n/t}function v(e){if(1!=arguments.length)throw new Error("Usage: sd=QuestSd(q)");var t=j(e.pdf),n=e.x.map(function(e){return Math.pow(e,2)}),a=j(x(e.pdf,e.x))/t;return Math.sqrt(j(x(e.pdf,n))/t-Math.pow(a,2))}function O(e,t){if(arguments.length>2)throw new Error("Usage: intensity=QuestQuantile(q,[quantileOrder])");if(arguments.length<2&&(t=e.quantileOrder),t>1||t<0)throw new Error("quantileOrder"+t+" is outside range 0 to 1.");var a=function(e){var t=[];return e.reduce(function(e,n,a){return t[a]=e+n},0),t}(e.pdf);if(!isFinite(a[a.length-1]))throw new Error("pdf is not finite");if(0==a[a.length-1])throw new Error("pdf is all zero");if(t<a[0])return e.tGuess+e.x[0];if(t>a[a.length-1])return e.tGuess+e.x[e.x.length-1];var r=a.slice();r.unshift(-1);var s=function(e){for(var t=[],n=0;n<e.length;n++)e[n]>0&&t.push(n);return t}(function(e){for(var t=[],n=0;n<e.length-1;n++)t.push(e[n+1]-e[n]);return t}(r));if(s.length<2)throw new Error("pdf has only "+s.length+" nonzero point(s)");var i=n(104).linear,o=S(a,s),c=S(e.x,s);return e.tGuess+i(t*a[a.length-1],o,c)[0]}function k(e,t,a,r,s,i){var o=n(59);if(arguments.length<5||arguments.length>6)throw new Error("Incorrect number of parameters: alpha, beta, gamma, lambda, x, varargin");if(i){if("Inverse"===i)if(Object(f.isArray)(s))var c=s.map(function(t){var n=o.eval("("+t+"-"+a+" ) / (1 - "+a+"-"+r+") - 1");return n=o.eval("-1 * log( -1 * "+n+")"),n=o.eval("log10( "+n+")"),n=o.divide(n,2),o.add(e,n)});else{var l=o.eval("("+s+"-"+a+" ) / (1 - "+a+"-"+r+") - 1");l=o.eval("-1 * log( -1 * "+l+")"),l=o.eval("log10( "+l+")"),l=o.divide(l,2);c=o.add(e,l)}if("Derivative"===i)if(Object(f.isArray)(s))c=s.map(function(n){return o.eval("( 1 - "+a+" - "+r+") * e^(-1 * 10^("+t+"*("+n+"-"+e+"))) * log(10) * 10^( "+t+"*("+n+"-"+e+"))*"+t)});else c=(1-a-r)*Math.exp(-1*Math.pow(10,t*(s-e)))*Math.log(10)*Math.pow(10,t*(s-e))*t}else if(Object(f.isArray)(s))c=s.map(function(n){return o.eval(a+"+ ( 1 - "+a+" - "+r+") * ( 1 - e^(-1 * 10^("+t+"*("+n+"-"+e+"))))")});else c=o.eval(a+"+ ( 1 - "+a+" - "+r+") * ( 1 - e^(-1 * 10^("+t+"*("+s+"-"+e+"))))");return c}function S(e,t){for(var n=[],a=0;a<t.length;a++)n.push(e[t[a]]);return n}function x(e,t){return e.map(function(e,n){return e*t[n]})}function j(e){return e.reduce(function(e,t){return e+t},0)}function C(e,t,a,r,s){var i={intensities:[],parameters:[],beta:0},o=[];o.push([25,50,75,90]),o.push([]);var c=n(59),l=[];l.push(N(e)),l.push(N(t)),i.parameters=l;var u=a,h=c.mean(e.beta,t.beta);i.beta=h,console.log(u,3.5,s,r);var m=n(645),p=function(e){return(k(u,3.5,s,r,e)-.25).toString()};m(p,2).solution;return o[1].push(parseFloat(m(p,2).solution)),o[1].push(parseFloat(m(function(e){return(k(u,3.5,s,r,e)-.5).toString()},2).solution)),o[1].push(parseFloat(m(function(e){return(k(u,3.5,s,r,e)-.75).toString()},2).solution)),o[1].push(parseFloat(m(function(e){return(k(u,3.5,s,r,e)-.9).toString()},2).solution)),o.push(o[1]),i.intensities=o,console.log(i),i}function N(e){var t=n(59),a=w(e.tGuess,e.tGuessSd,e.pThreshold,t.eval("2^(1/4)"),e.delta,e.gamma,.02);a.dim=250;var r=y(a),s=j(r.pdf);if(0==s)throw new Error("Beta has zero probability, ",s);var i=E(a=r),o=function(e,t){if(2!=arguments.length)throw new Error("Usage: p=QuestPdf(q,t)");var n=Math.round((t-e.tGuess)/e.grain)+1+e.dim/2;return n=Math.min(e.pdf.length,Math.max(1,n)),e.pdf[n-1]}(a,i),c=(v(a),a.beta),l=o,u=i,h=v(a);t.sum(o*c),t.sqrt(t.sum(o*t.pow(c,2))/l-t.pow(t.sum(o*c)/l,2));return{t:u,sd:h,betaEstimate:1/(t.sum(o/c)/l),iBetaSd:t.sqrt(t.sum(o/t.pow(c,2))/l-t.pow(t.sum(o/c)/l,2))}}var M=n(29),T=function(e){return{type:"ADD_RESPONSE_1",payload:e}},I=function(e){return{type:"ADD_RESPONSE_TIME_1",payload:e}},D=function(e){return{type:"ADD_CONTRAST_1",payload:e}},F=function(e){return{type:"ADD_ARRAY",payload:e}},P=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(p.a)(Object(p.a)(n))),n.state={continue:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"keyFunction",value:function(e){81===e.keyCode&&(alert("User has Requested to Continue"),this.setState(function(e,t){return{continue:!0}}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){var e=w(.5,.1,.75,3.5,.01,.01,.001,.05);console.log(e);var t=w(.5,.1,.75,3.5,.01,.01,.001,.05);return t.updatePdf=1,function(e,t){var a=n(59),r=E(e),s=v(e),i=E(t),o=v(t),c=a.mean([r,i]);a.mean([s,o]),C(e,t,c,0,.01)}(e,t=b(t,.5,1)),!0===this.state.continue?r.a.createElement(m.a,{to:"/Instructions"}):r.a.createElement("div",{className:"Welcome"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Welcome-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Welcome-text"},r.a.createElement("span",{className:"bigger"},"Welcome to the study! "),r.a.createElement("br",null),r.a.createElement("br",null),"Please enter responses to the questions asked by pressing the:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null," 'Q' key for 'YES I SEE IT'")," or ",r.a.createElement("b",null," 'E' key for \"NO I DO NOT'"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)," Sometimes it may be difficult to answer, but if you do not know, please make your best guess.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)," PRESS the ",r.a.createElement("b",null," YES I SEE IT / 'Q' key")," to CONTINUE")),r.a.createElement("a",{href:"https://medicine.yale.edu/psychiatry/care/cmhc/",title:"Learn more about the Connecticut Mental Health Center",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:_.a,className:"Site-link",alt:"logo"}))))}}]),t}(a.Component),A=Object(M.c)(function(e){return{data:e.data}},function(e){return{add_response_1:function(t){return e(T(t))},add_array:function(t){return e(F(t))}}})(P),z=(n(656),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(p.a)(Object(p.a)(n))),n.state={continue:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"keyFunction",value:function(e){81===e.keyCode&&(alert("User has Requested to Continue"),this.setState(function(e,t){return{continue:!0}}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial"}):r.a.createElement("div",{className:"Instructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Instructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Instructions-text"},"This is a vision test.",r.a.createElement("br",null),r.a.createElement("br",null)," A visual white noise will be shown throughout the experiment.",r.a.createElement("br",null),r.a.createElement("br",null)," A striped-texture will appear inside the white noise when a tone is played.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "Q"/YES ')," if you ",r.a.createElement("b",null," DO "),"see the stripes.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "E"/NO ')," if you ",r.a.createElement("b",null," DO NOT ")," see the stripes.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES TO BEGIN A SHORT PRACTICE SESSION'))))}}]),t}(a.Component)),R=n(75),Q=n.n(R),q=n(108);n(195);function L(){var e={background:127.5,angle:Math.floor(135*Math.random())+45,imsize:256,initcontrast:.5,threshold:.2,phases:[0,.25],phase:0,alpha:.5,ppd:160,frequency:0};return e.phase=e.phases[Math.round(Math.random())],e.frequency=2/e.ppd,e}function G(e,t){for(var n=[],a=[],r=1;r<e.imsize+1;r++)for(var s=1;s<e.imsize+1;s++)n[4*(r-1+(s-1)*e.imsize)+0]=r-(e.imsize+1)/2,n[4*(r-1+(s-1)*e.imsize)+1]=r-(e.imsize+1)/2,n[4*(r-1+(s-1)*e.imsize)+2]=r-(e.imsize+1)/2,n[4*(r-1+(s-1)*e.imsize)+3]=r-(e.imsize+1)/2,a[4*(r-1+(s-1)*e.imsize)+0]=s-(e.imsize+1)/2,a[4*(r-1+(s-1)*e.imsize)+1]=s-(e.imsize+1)/2,a[4*(r-1+(s-1)*e.imsize)+2]=s-(e.imsize+1)/2,a[4*(r-1+(s-1)*e.imsize)+3]=s-(e.imsize+1)/2;for(var i=[],o=0;o<n.length&&o<a.length;o++)i[o]=.5*Math.cos(2*Math.PI*(e.frequency*(Math.sin(Math.PI/180*e.angle)*n[o]+Math.cos(Math.PI/180*e.angle)*a[o])+e.phase))*t;return i.map(function(t){return e.background+t*e.background})}var U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(p.a)(Object(p.a)(n))),n.create_noise=n.create_noise.bind(Object(p.a)(Object(p.a)(n))),n.state={continue:!1,counter:0,responses_1:[],contrast_array_1:[],response_time_1:[],ratings_1:[],responses_2:[],contrast_array_2:[],response_time_2:[],ratings_2:[],time_window:!1,time_window_start:0,time_window_rating:!1,limit:100,contrast_flag:1},n.canvasRef=r.a.createRef(),n.audioContext=new AudioContext,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"create_noise",value:function(e,t){var a,r=[.2,.5,.75],s=r.length,i=r,o=0,c=new(n(196)),l=document.getElementById("c"),u=l.getContext("2d"),h=u.getImageData(0,0,l.width,l.height),m=h.data,p=0,d=L(),_=G(d,0),f=Math.floor(20*Math.random()),g=100,w=0,y=void 0,b=this;function E(){return v.apply(this,arguments)}function v(){return(v=Object(q.a)(Q.a.mark(function t(){var n,r,v,O,k,S,x,j,C,N;return Q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(p==g+f&&(o=b.state.counter,w=i[o++],console.log(w),n=(new Date).getTime()/1e3,console.log("time on ",n),b.setState({time_window:!0,time_window_rating:!0,time_window_start:n}),console.log(b.state.responses_1,b.state.ratings_1,b.state.response_time_1,b.state.contrast_array_1),a=G(d,w),W(50,830,300,e)),r=0;r<256;r++)for(v=0;v<256;v++)p==g+f||p==g+f+1||p==g+f+2||p==g+f+3||p==g+f+4||p==g+f+5||p==g+f+6||p==g+f+7||p==g+f+8||p==g+f+9||p==g+f+10||p==g+f+11||p==g+f+12||p==g+f+13||p==g+f+14||p==g+f+15||p==g+f+16||p==g+f+17||p==g+f+18||p==g+f+19||p==g+f+20||p==g+f+21||p==g+f+22||p==g+f+23||p==g+f+24||p==g+f+25||p==g+f+26||p==g+f+27||p==g+f+28||p==g+f+29||p==g+f+30?(p==g+f+30&&(p=0),O=.4*c.noise3D(r/8,v/8,p/8)+.35,m[4*(r+256*v)+0]=d.alpha*a[4*(r+256*v)+0]+(1-d.alpha)*O*250,m[4*(r+256*v)+1]=d.alpha*a[4*(r+256*v)+1]+(1-d.alpha)*O*250,m[4*(r+256*v)+2]=d.alpha*a[4*(r+256*v)+2]+(1-d.alpha)*O*250,m[4*(r+256*v)+3]=255):(n=(new Date).getTime()/1e3,b.state.time_window_start+2==n&&(b.setState({time_window:!1,time_window_rating:!1}),b.state.contrast_array_1.length<b.state.responses_1.length&&b.setState({contrast_array_1:b.state.contrast_array_1.concat([w])}),b.state.responses_1.length!=b.state.ratings_1.length&&(b.state.responses_1.length>b.state.ratings_1.length?(console.log("response and response time discarded",b.state.responses_1,b.state.response_time_1,b.state.ratings_1,b.state.contrast_array_1),b.setState({responses_1:b.state.responses_1.slice(0,b.state.ratings_1.length),response_time_1:b.state.response_time_1.slice(0,b.state.ratings_1.length),counter:b.state.counter-1,contrast_array_1:b.state.contrast_array_1.slice(0,b.state.ratings_1.length)})):(console.log("rating discarded",b.state.responses_1,b.state.ratings_1,b.state.contrast_array_1),b.setState({ratings_1:b.state.ratings_1.slice(0,b.state.responses_1.length)}))),console.log("time off ",n)),O=.4*c.noise3D(r/8,v/8,p/8)+.35,m[4*(r+256*v)+0]=d.alpha*_[4*(r+256*v)+0]+(1-d.alpha)*O*250,m[4*(r+256*v)+1]=d.alpha*_[4*(r+256*v)+1]+(1-d.alpha)*O*250,m[4*(r+256*v)+2]=d.alpha*_[4*(r+256*v)+2]+(1-d.alpha)*O*250,m[4*(r+256*v)+3]=255);if(p++,u.putImageData(h,0,0),k=l.width/8,S=l.height/8,x=l.width/2-k/2,j=l.height/2-S/2,(C=new Image).src="https://www.shareicon.net/data/256x256/2015/12/04/682310_cross_512x512.png",u.fillStyle="gray",u.fillRect(x,j,k,S),u.drawImage(C,x,j,k,S),o!=s){t.next=19;break}for(window.cancelAnimationFrame(y),N=0;N<s;N++)b.props.add_response_1(b.state.responses_1[N]),b.props.add_response_time_1(b.state.response_time_1[N]),b.props.add_contrast_1(b.state.contrast_array_1[N]);return b.audioContext.close(),b.setState({continue:!0}),t.abrupt("return");case 19:o<s&&(y=window.requestAnimationFrame(E));case 20:case"end":return t.stop()}},t)}))).apply(this,arguments)}E.call(b)}},{key:"keyFunction",value:function(e){var t=(new Date).getTime()/1e3;81===e.keyCode&&1==this.state.time_window&&(this.setState({counter:this.state.counter+1,responses_1:this.state.responses_1.concat([1]),response_time_1:this.state.response_time_1.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),69===e.keyCode&&1==this.state.time_window&&(this.setState({counter:this.state.counter+1,responses_1:this.state.responses_1.concat([0]),response_time_1:this.state.response_time_1.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),49!==e.keyCode&&50!==e.keyCode&&51!==e.keyCode&&52!==e.keyCode&&53!==e.keyCode||1!=this.state.time_window_rating||this.setState({ratings_1:this.state.ratings_1.concat([e.keyCode-48]),time_window_rating:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),0==this.state.continue&&this.create_noise(this.audioContext)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return 1==this.state.continue?(alert("Trial completed"),r.a.createElement(m.a,{to:"/Complete"})):r.a.createElement("div",{className:"Trial"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Trial-header"},r.a.createElement("canvas",{id:"c",width:"256",height:"256",style:{zIndex:"0",position:"fixed",left:"25%",width:"50%",height:"auto"}}),r.a.createElement("canvas",{id:"c2",width:"256",height:"256",style:{zIndex:"1",position:"fixed",left:"25%",width:"50%",height:"auto"}})))}}]),t}(a.Component),Y=Object(M.c)(function(e){return{data:e.data}},function(e){return{add_response_1:function(t){return e(T(t))},add_response_time_1:function(t){return e(I(t))},add_contrast_1:function(t){return e(D(t))},add_array:function(t){return e(F(t))}}})(U);function W(e,t,n,a){if(a){var r=a.createOscillator(),s=a.createGain();r.connect(s),r.value=t,s.connect(a.destination),s.gain.value=e/100,r.start(a.currentTime),r.stop(a.currentTime+n/1e3)}}n(659);var B=function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))},H=(n(660),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(p.a)(Object(p.a)(n))),n.state={continue:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"keyFunction",value:function(e){81===e.keyCode&&(alert("User has Requested to Continue"),this.setState(function(e,t){return{continue:!0}}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return console.log(this.props.data),!0===this.state.continue?r.a.createElement(m.a,{to:"/TrialQ"}):r.a.createElement("div",{className:"Complete"},r.a.createElement("header",{className:"Complete-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Complete-text"},"Congratulations",r.a.createElement("br",null),r.a.createElement("br",null)," You have completed the first trial",r.a.createElement("br",null),r.a.createElement("br",null)," You responses have been recorded:",r.a.createElement("br",null),r.a.createElement("br",null),"Responses:",this.props.data.responses_1.map(function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none"}},e)}),"Response Times:",this.props.data.response_time_1.map(function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none"}},e)}),"Contrasts:",this.props.data.contrast_1.map(function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none"}},e)}),r.a.createElement("br",null),r.a.createElement("br",null)))))}}]),t}(a.Component)),J=Object(M.c)(function(e){return{data:e.data}})(H),V=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyFunction=n.keyFunction.bind(Object(p.a)(Object(p.a)(n))),n.create_noise=n.create_noise.bind(Object(p.a)(Object(p.a)(n))),n.process_data=n.process_data.bind(Object(p.a)(Object(p.a)(n))),n.gumbel_intensities=n.gumbel_intensities.bind(Object(p.a)(Object(p.a)(n))),n.state={continue:!1,counter:0,counter2:0,change:!1,responses_1:[],contrast_array_1:[],response_time_1:[],ratings_1:[],responses_2:[],contrast_array_2:[],response_time_2:[],ratings_2:[],time_window:!1,time_window_start:0,time_window_rating:!1,limit:100,rating_window:!0,currentQ:1},n.canvasRef=r.a.createRef(),n.audioContext=new AudioContext,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"create_noise",value:function(e){var t,a=80,r=0,s=0,i=0,o=[0,.5,1,0,.5,1,0,.5,1,0,.5,1],c=(a=o.length,new(n(196))),l=document.getElementById("c"),u=l.getContext("2d"),h=u.getImageData(0,0,l.width,l.height),m=h.data,p=0,d=.5,_=w(d,.1,.75,3.5,.01,.01,.001,20),f=w(d,.1,.75,3.5,.01,.01,.001,20),g=L(),y=G(g,0),E=Math.floor(20*Math.random()),v=100,k=0,S=void 0,x=this;function j(){return C.apply(this,arguments)}function C(){return(C=Object(q.a)(Q.a.mark(function n(){var o,w,C,N,M,T,I,D,F;return Q.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(p==v+E&&(r=x.state.counter,s=x.state.counter2,i=r+s,console.log(O(_),O(f)),r==s&&x.setState({currentQ:1}),r!=s&&(s++,x.setState({currentQ:2})),1==x.state.currentQ&&(k=(r=0)?d+.3:O(_)),2==x.state.currentQ&&(k=(s=0)?d-.3:O(f)),console.log(k),o=(new Date).getTime()/1e3,console.log("time on ",o),x.setState({time_window:!0,time_window_rating:!0,time_window_start:o}),console.log("for 1",x.state.responses_1,x.state.ratings_1,x.state.response_time_1,x.state.contrast_array_1),console.log("for 2",x.state.responses_2,x.state.ratings_2,x.state.response_time_2,x.state.contrast_array_2),t=G(g,k),K(50,830,300,e)),w=0;w<256;w++)for(C=0;C<256;C++)p==v+E||p==v+E+1||p==v+E+2||p==v+E+3||p==v+E+4||p==v+E+5||p==v+E+6||p==v+E+7||p==v+E+8||p==v+E+9||p==v+E+10||p==v+E+11||p==v+E+12||p==v+E+13||p==v+E+14||p==v+E+15||p==v+E+16||p==v+E+17||p==v+E+18||p==v+E+19||p==v+E+20||p==v+E+21||p==v+E+22||p==v+E+23||p==v+E+24||p==v+E+25||p==v+E+26||p==v+E+27||p==v+E+28||p==v+E+29||p==v+E+30?(p==v+E+30&&(p=0),N=.4*c.noise3D(w/8,C/8,p/8)+.35,m[4*(w+256*C)+0]=g.alpha*t[4*(w+256*C)+0]+(1-g.alpha)*N*250,m[4*(w+256*C)+1]=g.alpha*t[4*(w+256*C)+1]+(1-g.alpha)*N*250,m[4*(w+256*C)+2]=g.alpha*t[4*(w+256*C)+2]+(1-g.alpha)*N*250,m[4*(w+256*C)+3]=255):(o=(new Date).getTime()/1e3,x.state.time_window_start+2==o&&(x.setState({time_window:!1,time_window_rating:!1}),1==x.state.currentQ&&(x.state.contrast_array_1.length<x.state.responses_1.length&&(x.setState({contrast_array_1:x.state.contrast_array_1.concat([k])}),x.setState({change:!0})),x.state.responses_1.length!=x.state.ratings_1.length&&(x.state.responses_1.length>x.state.ratings_1.length?(console.log("response and response time discarded",x.state.responses_1,x.state.response_time_1,x.state.ratings_1,x.state.contrast_array_1),x.setState({responses_1:x.state.responses_1.slice(0,x.state.ratings_1.length),response_time_1:x.state.response_time_1.slice(0,x.state.ratings_1.length),counter:x.state.counter-1,contrast_array_1:x.state.contrast_array_1.slice(0,x.state.ratings_1.length)})):(console.log("rating discarded",x.state.responses_1,x.state.ratings_1,x.state.contrast_array_1),x.setState({ratings_1:x.state.ratings_1.slice(0,x.state.responses_1.length)})))),2==x.state.currentQ&&(x.state.contrast_array_2.length<x.state.responses_2.length&&(x.setState({contrast_array_2:x.state.contrast_array_2.concat([k])}),x.setState({change:!0})),x.state.responses_2.length!=x.state.ratings_2.length&&(x.state.responses_2.length>x.state.ratings_2.length?(console.log("response and response time discarded",x.state.responses_2,x.state.response_time_2,x.state.ratings_2,x.state.contrast_array_2),x.setState({responses_2:x.state.responses_2.slice(0,x.state.ratings_2.length),response_time_2:x.state.response_time_2.slice(0,x.state.ratings_2.length),counter:x.state.counter-1,contrast_array_2:x.state.contrast_array_2.slice(0,x.state.ratings_2.length)})):(console.log("rating discarded",x.state.responses_2,x.state.ratings_2,x.state.contrast_array_2),x.setState({ratings_2:x.state.ratings_2.slice(0,x.state.responses_2.length)})))),console.log("time off ",o)),N=.4*c.noise3D(w/8,C/8,p/8)+.35,m[4*(w+256*C)+0]=g.alpha*y[4*(w+256*C)+0]+(1-g.alpha)*N*250,m[4*(w+256*C)+1]=g.alpha*y[4*(w+256*C)+1]+(1-g.alpha)*N*250,m[4*(w+256*C)+2]=g.alpha*y[4*(w+256*C)+2]+(1-g.alpha)*N*250,m[4*(w+256*C)+3]=255);if(p++,u.putImageData(h,0,0),M=l.width/8,T=l.height/8,I=l.width/2-M/2,D=l.height/2-T/2,(F=new Image).src="https://www.shareicon.net/data/256x256/2015/12/04/682310_cross_512x512.png",u.fillStyle="gray",u.fillRect(I,D,M,T),u.drawImage(F,I,D,M,T),i!=a){n.next=18;break}return window.cancelAnimationFrame(S),x.audioContext.close(),x.setState({continue:!0}),n.abrupt("return");case 18:i<a&&(S=window.requestAnimationFrame(j),1==x.state.currentQ&&1==x.state.change&&(console.log("changing the q"),_=b(_,[x.state.contrast_array_1[x.state.contrast_array_1.length-1]],[x.state.responses_1[x.state.responses_1.length-1]]),console.log(O(_)),x.setState({change:!1})),2==x.state.currentQ&&1==x.state.change&&(f=b(f,x.state.contrast_array_1[x.state.contrast_array_1.length-1],x.state.responses_1[x.state.responses_1.length-1]),x.setState({change:!1})));case 19:case"end":return n.stop()}},n)}))).apply(this,arguments)}j.call(x)}},{key:"keyFunction",value:function(e){var t=(new Date).getTime()/1e3;81===e.keyCode&&1==this.state.time_window&&1==this.state.currentQ&&(this.setState({counter:this.state.counter+1,responses_1:this.state.responses_1.concat([1]),response_time_1:this.state.response_time_1.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),81===e.keyCode&&1==this.state.time_window&&2==this.state.currentQ&&(this.setState({counter2:this.state.counter2+1,responses_2:this.state.responses_2.concat([1]),response_time_2:this.state.response_time_2.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),69===e.keyCode&&1==this.state.time_window&&1==this.state.currentQ&&(this.setState({counter:this.state.counter+1,responses_1:this.state.responses_1.concat([0]),response_time_1:this.state.response_time_1.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),69===e.keyCode&&1==this.state.time_window&&2==this.state.currentQ&&(this.setState({counter:this.state.counter2+1,responses_2:this.state.responses_2.concat([0]),response_time_2:this.state.response_time_2.concat([t-this.state.time_window_start]),time_window:!1}),this.state.counter==this.state.limit&&this.setState({continue:!0})),49!==e.keyCode&&50!==e.keyCode&&51!==e.keyCode&&52!==e.keyCode&&53!==e.keyCode||1!=this.state.time_window_rating||(1==this.state.currentQ?this.setState({ratings_1:this.state.ratings_1.concat([e.keyCode-48]),time_window_rating:!1}):this.setState({ratings_2:this.state.ratings_2.concat([e.keyCode-48]),time_window_rating:!1}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),0==this.state.continue&&this.create_noise(this.audioContext)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return 1==this.state.continue?(alert("Trial completed"),r.a.createElement(m.a,{to:"/Complete"})):r.a.createElement("div",{className:"Trial"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Trial-header"},r.a.createElement("canvas",{id:"c",width:"256",height:"256",style:{zIndex:"0",position:"fixed",left:"25%",width:"50%",height:"auto"}}),r.a.createElement("canvas",{id:"c2",width:"256",height:"256",style:{zIndex:"1",position:"fixed",left:"25%",width:"50%",height:"auto"}})))}}]),t}(a.Component),X=Object(M.c)(function(e){return{data:e.data}},function(e){return{add_response_1:function(t){return e(T(t))},add_response_time_1:function(t){return e(I(t))},add_contrast_1:function(t){return e(D(t))},add_array:function(t){return e(F(t))}}})(V);function K(e,t,n,a){if(a){var r=a.createOscillator(),s=a.createGain();r.connect(s),r.value=t,s.connect(a.destination),s.gain.value=e/100,r.start(a.currentTime),r.stop(a.currentTime+n/1e3)}}var Z=function(){return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/users/:id",exact:!0,component:A}),r.a.createElement(m.b,{path:"/",exact:!0,component:A}),r.a.createElement(m.b,{path:"/Welcome",exact:!0,component:A}),r.a.createElement(m.b,{path:"/Instructions",exact:!0,component:z}),r.a.createElement(m.b,{path:"/Trial",exact:!0,component:Y}),r.a.createElement(m.b,{path:"/Complete",exact:!0,component:J}),r.a.createElement(m.b,{path:"/TrialQ",exact:!0,component:X}),r.a.createElement(m.b,{component:B}))},$=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Z,null))}}]),t}(a.Component),ee=n(58),te=n(32),ne=n(52),ae=n(197),re=n(134),se=n(110),ie=n(111),oe={responses_1:[],responses_2:[],response_time_1:[],response_time_2:[],contrast_1:[],contrast_2:[],test:1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARRAY":return e+1;case"ADD_RESPONSE_1":return Object(ie.a)({},e,{responses_1:[].concat(Object(se.a)(e.responses_1),[t.payload])});case"ADD_RESPONSE_TIME_1":return Object(ie.a)({},e,{response_time_1:[].concat(Object(se.a)(e.response_time_1),[t.payload])});case"ADD_CONTRAST_1":return Object(ie.a)({},e,{contrast_1:[].concat(Object(se.a)(e.contrast_1),[t.payload])});default:return e}},le=function(e){return Object(ne.c)({data:ce,router:Object(re.a)(e)})},ue=Object(te.a)();var he=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.d;return Object(ne.e)(le(ue),e,t(Object(ne.a)(Object(ae.a)(ue))))}({history:ue});i.a.render(r.a.createElement(M.a,{store:he},r.a.createElement(ee.a,{history:ue,basename:"/VCH_APP"},r.a.createElement($,null))),document.getElementById("root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.0606daca.chunk.js.map